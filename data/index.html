<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<title>TTGO</title>
	<link rel="stylesheet" href="css/main.css" />
	<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.9/ace.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>
	<br /><br />
	<br /><br />
	<br /><br />
	<!--中心-->
	<div class="content">
		<div class="register-box">
			<div class="wrap">
				<div class="register-box-con2">
					<div class="register-box-con2-box clearfix mar-bottom20">
						<label class="register-box-con2-box-left"><em class="bitian">*</em>企业名称</label>
						<div class="register-box-con2-box-right">
							<input type="text" class="login-box-cen-form-input w358" placeholder="请输入与工商营业执照一致的公司名称，不超过20个字" id="reg_info_company" />
							<label id="reg_info_company_text" class="err err-top40">请输入与工商营业执照一致的公司名称，不超过20个字</label>
						</div>
					</div>
					<div class="register-box-con2-box clearfix mar-bottom20">
						<label class="register-box-con2-box-left"><em class="bitian"></em>企业网址</label>
						<div class="register-box-con2-box-right">
							<input type="text" class="login-box-cen-form-input w358" placeholder="请输入正确的网址" id="reg_info_www" />
							<label class="err err-top40" id="reg_info_www_text">请输入正确的网址</label>
						</div>
					</div>
					<div class="register-box-con2-box clearfix mar-bottom20">
						<label class="register-box-con2-box-left"><em class="bitian"></em>企业地址</label>
						<div class="register-box-con2-box-right">
							<input type="text" class="login-box-cen-form-input w358" placeholder="公司所在地址，不超过40个字" id="reg_info_address" />
							<label class="err err-top40" id="reg_info_address_text">公司所在地址，不超过40个字</label>
						</div>
					</div>

					<div class="register-box-con2-box clearfix mar-bottom20">
						<label class="register-box-con2-box-left"><em class="bitian">*</em>联系人</label>
						<div class="register-box-con2-box-right">
							<input type="text" class="login-box-cen-form-input w358" placeholder="请输入与身份证一致的姓名，不能超过20个字" id="reg_info_name" />
							<label class="err err-top40" id="reg_info_name_text">请输入与身份证一致的姓名，不能超过20个字</label>
						</div>
					</div>
					<div class="register-box-con2-box clearfix mar-bottom20">
						<label class="register-box-con2-box-left"><em class="bitian">*</em>Tel</label>
						<div class="register-box-con2-box-right">
							<input type="text" class="login-box-cen-form-input w358" placeholder="电话" id="login_phone" />
							<label class="err err-top40" id="login_phone_text">电话，不能超过20个字</label>
						</div>
					</div>
					<div class="register-box-con2-box clearfix mar-bottom20">
						<label class="register-box-con2-box-left"><em class="bitian">*</em>Email地址</label>
						<div class="register-box-con2-box-right">
							<input type="text" class="login-box-cen-form-input w358" placeholder="请输入有效邮箱，用于接收平台审核等重要消息通知" id="reg_info_email" />
							<label class="err err-top40" id="reg_info_email_text">请输入有效邮箱，用于接收平台审核等重要消息通知</label>
						</div>
					</div>
					<div class="register-box-con2-box clearfix mar-bottom20">
						<label class="register-box-con2-box-left"><em class="bitian">*</em>名 片</label>
						<div class="register-box-con2-box-right">
							<label class="register-box-con2-box-upload">
								<input type="file" name="file" id="reg_info_file" />
								<div class="register-box-con2-box-upload-ti"><em id="reg_info_file_w">上传</em><img id="reg_info_file_base64"
									 style="display:none;" /></div>
							</label>
							<!-- <p class="register-box-con2-box-pw">1.支持图片格式JPG/PNG，图片大小不超过2M</p> -->
							<!-- <p class="register-box-con2-box-pw">2.上传名片，便于联系开发者进行审核等重要事项</p> -->
							<label class="err err-top160" id="reg_info_file_text">支持图片格式JPG/PNG，图片大小不超过2M</label>
						</div>
					</div>
					<div class="register-box-con2-box clearfix mar-bottom20 mar-top50">
						<label class="register-box-con2-box-left"></label>
						<div class="register-box-con2-box-right">
							<input type="submit" value="提交" class="login-box-cen-form-button w380" id="reg_info_submit" />
						</div>
					</div>

				</div>
			</div>
		</div>
	</div>
	<br /><br />

	<div id="uploader"></div>
	<br /><br />
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/tbdValidate.js"></script>
	<script type="text/javascript" src="js/upload.js"></script>
	<script type="text/javascript">
		//demo2
		var regconfig = [
			{ eleinput: "login_phone", eletext: "login_phone_text", rule: [{ reg: /^.+$/, text: "手机号不能为空" }, { reg: /^1[34578]\d{9}$/, text: "手机号格式错误" }] },
			{ eleinput: "reg_info_company", eletext: "reg_info_company_text", rule: [{ reg: /^.+$/, text: "企业名称不能为空" }, { reg: /^.{1,20}$/, text: "企业名称不超过20个字" }] },
			{ eleinput: "reg_info_name", eletext: "reg_info_name_text", rule: [{ reg: /^.+$/, text: "联系人不能为空" }, { reg: /^.{1,20}$/, text: "联系人不超过20个字" }] },
			{ eleinput: "reg_info_email", eletext: "reg_info_email_text", rule: [{ reg: /^.+$/, text: "Email地址不能为空" }, { reg: /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/, text: "Email地址格式错误" }] }
		];
		tbdValidate(
			regconfig,
			{
				elesubmit: "reg_info_submit",//提交按钮
				funsubmit: function () {//验证通过可提交回调
					if ($("#reg_info_file_base64").attr("src")) {
						$("#reg_info_file_text").hide();
					} else {
						$("#reg_info_file_text").html('请上传名片').show();
						return false;
					};
					//信息提交接口
					alert("成功");
					var company = document.getElementById("reg_info_company");
					var name = document.getElementById("reg_info_name");
					var address = document.getElementById("reg_info_address");
					var email = document.getElementById("reg_info_email");
					var link = document.getElementById("reg_info_www");
					var tel = document.getElementById("login_phone");
					console.log(company.value);
					console.log(name.value);
					console.log(address.value);
					console.log(email.value);
					console.log(tel.value);

					$.post("/data", {
						"company": company.value,
						"name": name.value,
						"address": address.value,
						"email": email.value,
						"link": link.value,
						"tel": tel.value
					});

					var uploading = false;

					var reg_info_file = document.getElementById("reg_info_file");
					var file = reg_info_file.files[0];
	
					console.log("name:" + file.name);
					console.log("size:" + file.size);
					console.log("type:" + file.type);

					var formData = new FormData();
					formData.append("data", reg_info_file.files[0]);

					$.ajax({
						url: "/",
						type: 'POST',
						cache: false,
						data: formData,
						processData: false,
						contentType: false,
						dataType: file.type,
						beforeSend: function () {
							uploading = true;
							console.log("success start");
						},
						success: function (data) {
							console.log("success upload");
							uploading = false;
						}
					});



				},
				funerr: function () {//不可提交回调
					if ($("#reg_info_file_base64").attr("src")) {
						$("#reg_info_file_text").hide();
					} else {
						$("#reg_info_file_text").html('请上传名片').show();
						return false;
					};
				},
				funerrlist: function (errlist) {
					$('#' + errlist[0]).focus();
				}
			}
		);

		var noregconfig = [
			{ eleinput: "reg_info_www", eletext: "reg_info_www_text", rule: [{ reg: /(^(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$)|(^$)/, text: "请输入正确的网址" }] },
			{ eleinput: "reg_info_address", eletext: "reg_info_address_text", rule: [{ reg: /^.{0,40}$/, text: "公司所在地址，不超过40个字" }] },
		];
		tbdnoValidate(noregconfig);
			//end


	</script>
</body>

</html>